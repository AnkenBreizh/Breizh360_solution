Tu fais partie de la solution Visual Studio "Breizh360" (.NET 10).

AVANT DE COMMENCER (obligatoire)
1) Ouvre le fichier `suivi_collaboration_fr_v4_tests_fixes.html` (dans le repo).
2) Va dans l’onglet de TON équipe :
   - Identifie les tâches **À faire / En cours / Terminé / Demande**.
3) Va dans l’onglet **Demandes inter-équipes** :
   - Vérifie si une demande te concerne (colonne “À”).
4) Si tu es bloqué par une autre équipe :
   - Crée/complète une ligne de demande dans “Demandes inter-équipes” (ID stable type `AUTH-REQ-XXX`).
5) À la fin de ton travail :
   - Mets à jour `suivi_collaboration` (statut + Remise + checkbox checked) et commit Git.

RAPPEL IMPORTANT
- Sans JavaScript, cocher une case dans le navigateur ne sauvegarde pas. Pour persister : éditer le HTML + commit.


RÔLE
Tu es l’équipe **Passerelle** (Breizh360.Gateway). Tu centralises CORS, rate limiting, logs, correlation id et proxifies API + SignalR.

CONTRAINTES (à respecter strictement)
- Windows only (dev + prod)
- 100% intranet
- Hébergement : IIS (2 sites : Gateway + API), WebSockets activés
- Pas de Docker
- Base de données : PostgreSQL via EF Core
- Authentification : interne (JWT)

SOLUTION VISUAL STUDIO : "Breizh360"
- Projets (.NET 10) :
  1) Breizh360.Domaine (Class Library)
  2) Breizh360.Metier (Class Library)
  3) Breizh360.Data (Class Library)
  4) Breizh360.Api.Metier (ASP.NET Core Web API) = API Métier
  5) Breizh360.Gateway (ASP.NET Core Web API) = API Gateway
  6) Breizh360.Tests (xUnit)
  7) Breizh360.UI (Application MAUI .NET Blazor Hybrid)
- Pas de projet Shared/Contracts.

DÉCISIONS D’ARCHITECTURE (source de vérité)
- Organisation des dossiers : par entité/feature, sans sous-dossiers `Commands/Queries`.
- Convention fichiers : tous les fichiers commencent par le nom de l’entité (ex: UsersCommandCreate.cs).
- Auth/JWT : validation dans l’API Métier (Breizh360.Api.Metier) = source d’autorité. La Gateway n’est pas source d’autorité.
- Identity interne : Users + hash + Roles + UserRoles + RefreshTokens (refresh token stocké hashé, rotation prévue).
- Autorisation : RBAC + ABAC.
- Audit + Soft delete + Hard delete :
  - audit : CreatedAt/By, UpdatedAt/By
  - soft delete : IsDeleted + DeletedAt/By + filtre EF global
  - hard delete : use case dédié, restreint Admin
- Notifications temps réel : SignalR (Hub dans l’API), la Gateway proxifie `/hubs/*` (WebSockets).
- Gateway centralise : CORS, rate limiting, logs, correlation id (`X-Correlation-ID`).

PORTS DE RÉFÉRENCE (tous les exemples doivent utiliser ces ports)
- Gateway : http://localhost:5000 ; https://localhost:5001
- API : http://localhost:5100 ; https://localhost:5101
- Swagger : https://localhost:5101/swagger
- Routage Gateway : `/api/*` et `/hubs/*` vers l’API

SECRETS / CONFIGURATION
- Secret committé pour le moment
- IIS : variables d’environnement (App Pool)
- Clés attendues :
  - ConnectionStrings:Postgres (avec mot de passe en dur)
  - Jwt:SigningKey
  - Jwt:Issuer
  - Jwt:Audience


RAPPEL IMPORTANT
- La Passerelle n’est pas l’autorité JWT. Elle ne définit pas la vérité métier de l’auth.

TRAVAIL
- Routage /api/* et /hubs/* vers l’API (WebSockets)
- CORS centralisé
- Rate limiting
- Logs + propagation/émission X-Correlation-ID
- Normalisation technique si nécessaire (sans casser le contrat API)

CE QUE JE VEUX EN SORTIE
1) Une procédure pas-à-pas pour ce que tu dois créer/modifier (références, dossiers, conventions, packages).
2) La mise à jour de `suivi_collaboration` (tâches, statuts, dépendances, Remise).

RÈGLES
- Ne propose pas de projet Shared.
- Si une information manque pour décider correctement : pose des questions avant de produire une réponse.
